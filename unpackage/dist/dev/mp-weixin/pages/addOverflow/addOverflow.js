(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addOverflow/addOverflow"],{512:function(e,t,s){"use strict";(function(e,t){var a=s(4);s(26);a(s(25));var r=a(s(513));e.__webpack_require_UNI_MP_PLUGIN__=s,t(r.default)}).call(this,s(1)["default"],s(2)["createPage"])},513:function(e,t,s){"use strict";s.r(t);var a=s(514),r=s(516);for(var n in r)["default"].indexOf(n)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(n);s(518);var i,o=s(36),u=Object(o["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"286bb58e",null,!1,a["components"],i);u.options.__file="pages/addOverflow/addOverflow.vue",t["default"]=u.exports},514:function(e,t,s){"use strict";s.r(t);var a=s(515);s.d(t,"render",(function(){return a["render"]})),s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),s.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),s.d(t,"components",(function(){return a["components"]}))},515:function(e,t,s){"use strict";var a;s.r(t),s.d(t,"render",(function(){return r})),s.d(t,"staticRenderFns",(function(){return i})),s.d(t,"recyclableRender",(function(){return n})),s.d(t,"components",(function(){return a}));try{a={uniForms:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(s.bind(null,1116))},uniFormsItem:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(s.bind(null,1129))},uniPopup:function(){return s.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(s.bind(null,1075))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,s=(e._self._c,e.params.storeInWarehouseDetailBoList.length),a=e.__map(e.params.storeInWarehouseDetailBoList,(function(t,s){var a=e.__get_orig(t),r=e._f("decimalFormat")(e.num(s));return{$orig:a,f0:r}})),r=e.productList&&e.productList.length>0;e.$mp.data=Object.assign({},{$root:{g0:s,l0:a,g1:r}})},n=!1,i=[];r._withStripped=!0},516:function(e,t,s){"use strict";s.r(t);var a=s(517),r=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},517:function(e,t,s){"use strict";(function(e){var a=s(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(s(53)),n=a(s(55)),i=s(57),o=(s(473),s(25),function(){s.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(function(){return resolve(s(1075))}.bind(null,s)).catch(s.oe)}),u={components:{uniPopup:o},data:function(){return{indicatorStyle:"height: 50px;",store:"",outWarehouseDelId:"",outWarehouseName:"",inWarehouseName:"",orderType:"",paymentTerms:"",agentUser:"",value:[0],selectList:[],selectList1:[],selectIndex:0,openIndex:null,product:[{},{}],productList:[],searchValue:"",params:{pageNum:1,pageSize:20,storeInWarehouseDetailBoList:[{}]},index:"",params1:{pageNum:1,pageSize:20},params2:{pageNum:1,pageSize:20},params3:{pageNum:1,pageSize:20},item:{},array:["移库","调拨"],selectList2:[],inventoryId:"",warehouseId:"",title:"",classification:"",aa:!1,Number:0,rules:{receivalQuantity:{rules:[{required:!0,errorMessage:"请输入正确数量"},{pattern:/^[1-9]\d*$/,errorMessage:"请输入大于零的整数"}]},position:{rules:[{required:!0,errorMessage:'请输入库位"'}]},price:{rules:[{required:!0,errorMessage:'请输入单价"'}]}},showMask:!1,salesmanList:[],choiceSalesman:{}}},computed:{num:function(e){return function(e){return void 0!=this.params.storeInWarehouseDetailBoList[e].price&&void 0!=this.params.storeInWarehouseDetailBoList[e].receivalQuantity?(this.params.storeInWarehouseDetailBoList[e].num=this.params.storeInWarehouseDetailBoList[e].receivalQuantity*this.params.storeInWarehouseDetailBoList[e].price,this.params.storeInWarehouseDetailBoList[e].num,this.params.storeInWarehouseDetailBoList[e].num):this.params.storeInWarehouseDetailBoList[e].num=0}}},filters:{decimalFormat:function(e){return e.toFixed(2)}},onLoad:function(){var e=this;return(0,n.default)(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getwarehouse)(e.params3);case 2:s=t.sent,s.data.items&&(e.outWarehouseName=s.data.items[0].warehouseName,e.params.warehouseName=e.outWarehouseName,e.params.warehouseId=s.data.items[0].warehouseId,e.params1.warehouseId=s.data.items[0].warehouseId,e.warehouseId=s.data.items[0].warehouseId,e.params.warehouseCode=s.data.items[0].warehouseCode);case 4:case"end":return t.stop()}}),t)})))()},onBackPress:function(e){if("navigateBack"==e.from){var t=getCurrentPages(),s=t[t.length-2];s=s.$vm,s&&s.getList&&(null==s.list?s.getList(1,1):s.getList(1,s.list.length+1))}},methods:{open:function(t){var s=this;return(0,n.default)(r.default.mark((function a(){var n,o;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s.selectIndex=0,s.selectList=[],s.selectList1=[],s.selectList2=[],a.t0=t,a.next=0===a.t0?7:3===a.t0?13:19;break;case 7:return s.title="请选择门店",a.next=10,(0,i.getwarehouse)(s.params3);case 10:return n=a.sent,n.data.items?n.data.items.forEach((function(e){s.selectList.push(e.warehouseName),s.selectList1.push(e.warehouseId),s.selectList2.push(e.warehouseCode)})):e.showToast({title:"没有数据",icon:"none",duration:1e3}),a.abrupt("break",19);case 13:return s.title="请选择分类",a.next=16,(0,i.getclassification)(s.params3);case 16:return o=a.sent,o.data?o.data.forEach((function(e){s.selectList.push(e.dictLabel)})):e.showToast({title:"没有数据",icon:"none",duration:1e3}),a.abrupt("break",19);case 19:s.$refs.popup.open(),s.openIndex=t;case 21:case"end":return a.stop()}}),a)})))()},reset:function(){var e=this;return(0,n.default)(r.default.mark((function t(){var s,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.classification="",e.productList=[],s={pageNum:1,pageSize:20},s.warehouseId=e.params2.warehouseId,e.params2={pageNum:1,pageSize:20,warehouseId:s.warehouseId,carg:"",productName:"",pinyin:""},t.next=7,(0,i.getinventory)(s);case 7:a=t.sent,null!=a.data.items&&(e.productList=a.data.items),e.aa=!1;case 10:case"end":return t.stop()}}),t)})))()},scrolltolowerFun:function(){var e=this;return(0,n.default)(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.params2.pageNum=e.params2.pageNum+1,t.next=3,(0,i.getinventory)(e.params2);case 3:if(s=t.sent,null==s.data.items){t.next=8;break}s.data.items.forEach((function(t){e.productList.push(t)})),t.next=10;break;case 8:return e.aa=!0,t.abrupt("return");case 10:case"end":return t.stop()}}),t)})))()},add:function(){this.params.storeInWarehouseDetailBoList.push({}),this.Number++},del:function(e){if(this.params.storeInWarehouseDetailBoList.length>1){var t=this.params.storeInWarehouseDetailBoList.filter((function(t,s){return s!==e}));this.params.storeInWarehouseDetailBoList=t}this.Number>0&&this.Number--},cancel:function(){this.$refs.popup.close()},success:function(){switch(this.openIndex){case 0:this.outWarehouseName=this.selectList[this.selectIndex],this.params.warehouseName!=this.outWarehouseName&&this.clear(),this.params.warehouseName=this.outWarehouseName,this.params.warehouseId=this.selectList1[this.selectIndex],this.params1.warehouseId=this.selectList1[this.selectIndex],this.warehouseId=this.selectList1[this.selectIndex],this.params.warehouseCode=this.selectList2[this.selectIndex];break;case 3:this.classification=this.selectList[this.selectIndex],this.params2.classify=this.classification;break}this.$refs.popup.close()},bindTextAreaBlur:function(e){this.params.remark=e.detail.value},clear:function(){this.params.storeInWarehouseDetailBoList=[{receivalQuantity:"",position:"",price:""}]},search1:function(){var t=this;return(0,n.default)(r.default.mark((function s(){var a;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.productList=[],s.next=3,(0,i.getinventory)(t.params2);case 3:if(a=s.sent,null==a.data.items){s.next=8;break}t.productList=a.data.items,s.next=10;break;case 8:return e.showToast({title:"没有数据",icon:"none",duration:1e3}),s.abrupt("return");case 10:case"end":return s.stop()}}),s)})))()},Return:function(){var t=this;return(0,n.default)(r.default.mark((function s(){var a,o,u;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.params.orderCategory=3,t.params.status=1,t.params.constructionWork){s.next=4;break}return s.abrupt("return",e.showToast({title:"请选择业务员",icon:"none",duration:1e3}));case 4:if(a=t.params.storeInWarehouseDetailBoList.map((function(e){return e.position})),o=new Set(a),o.size==a.length){s.next=8;break}return s.abrupt("return",e.showToast({title:"产品库位重复",icon:"none",duration:1e3}));case 8:for(u=0;u<=t.Number;u++)t.$refs.form[u].validate().then(function(){var s=(0,n.default)(r.default.mark((function s(a){var n;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,(0,i.addbenefit)(t.params);case 2:n=s.sent,200==n.code&&(e.showToast({title:"新增成功",icon:"none",duration:1e3}),setTimeout((function(){e.navigateBack({data:1})}),1e3));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}());case 9:case"end":return s.stop()}}),s)})))()},bindChange:function(e){this.selectIndex=e.detail.value[0]},openProduct:function(e){var t=this;return(0,n.default)(r.default.mark((function s(){var a;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.inventoryId="",t.index=e,t.params2.pageNum=1,t.params2.pageSize=20,t.params2.warehouseId=t.params1.warehouseId,s.next=7,(0,i.getinventory)(t.params2);case 7:a=s.sent,null!=a.data.items&&(t.productList=a.data.items),t.$refs.product.open();case 10:case"end":return s.stop()}}),s)})))()},closeProduct:function(){this.$refs.product.close()},choice:function(e){this.inventoryId=e.inventoryId,this.item=e},join:function(){if(""==this.inventoryId)return e.showToast({title:"请选择产品",icon:"none",duration:1e3});this.$set(this.params.storeInWarehouseDetailBoList[this.index],"inventoryId",this.item.inventoryId),this.$set(this.params.storeInWarehouseDetailBoList[this.index],"position",this.item.positionCode),this.$set(this.params.storeInWarehouseDetailBoList[this.index],"productName",this.item.productName),this.$set(this.params.storeInWarehouseDetailBoList[this.index],"productId",this.item.productId),this.$set(this.params.storeInWarehouseDetailBoList[this.index],"receivalQuantity",this.item.usableQuantity),this.$set(this.params.storeInWarehouseDetailBoList[this.index],"price",this.item.price),this.$refs.product.close()},chioceView:function(){var t=this,s=e.getSystemInfoSync().platform;"android"==s?(plus.android.checkPermission("android.permission.CAMERA",(function(e){-1==e.checkResult&&(t.showMask=!0)}),(function(e){console.error("Error checking permission:",e.message)})),plus.android.requestPermissions(["android.permission.CAMERA"],(function(e){t.showMask=!1,e.granted.length>0&&t.scanCarg()}))):this.scanCarg()},scanCarg:function(){var t=this;e.scanCode({onlyFromCamera:!0,scanType:["barCode"],success:function(s){var a={carg:s.result,pageNum:1,pageSize:1,warehouseId:t.params1.warehouseId};(0,i.getinventory)(a).then((function(s){if(200==s.code)if(s.data.items&&s.data.items.length>0){for(var a=!0,r=0;r<t.params.storeInWarehouseDetailBoList.length;r++)if(!t.params.storeInWarehouseDetailBoList[r].productName){t.$set(t.params.storeInWarehouseDetailBoList[r],"productName",s.data.items[0].productName),t.$set(t.params.storeInWarehouseDetailBoList[r],"productId",s.data.items[0].productId),t.$set(t.params.storeInWarehouseDetailBoList[r],"receivalQuantity",s.data.items[0].usableQuantity),t.$set(t.params.storeInWarehouseDetailBoList[r],"inventoryId",s.data.items[0].inventoryId),t.$set(t.params.storeInWarehouseDetailBoList[r],"price",s.data.items[0].price),t.$set(t.params.storeInWarehouseDetailBoList[r],"position",s.data.items[0].positionCode),a=!1;break}if(a){var n={productName:s.data.items[0].productName,productId:s.data.items[0].productId,receivalQuantity:s.data.items[0].usableQuantity,inventoryId:s.data.items[0].inventoryId,position:s.data.items[0].positionCode,price:s.data.items[0].price};t.params.storeInWarehouseDetailBoList.push(n)}e.showToast({title:"扫描添加成功",icon:"none",duration:2e3})}else e.showToast({title:"该产品不存在",icon:"none",duration:2e3});else e.showToast({title:s.message,icon:"none",duration:2e3})}))}})},openSalesman:function(){var e=this,t={pageNum:1,pageSize:1e3};(0,i.getwen)(t).then((function(t){e.salesmanList=t.rows,e.$refs.salesman.open()}))},closesalesman:function(){this.$refs.salesman.close()},salesmanchoice:function(e){var t=this;this.salesmanList.forEach((function(s,a){s.userId==e.userId?(t.$set(t.salesmanList[a],"choice",!0),t.choiceSalesman=s):t.$set(t.salesmanList[a],"choice",!1)}))},submitSalesman:function(){this.agentUser=this.choiceSalesman.userName,this.params.constructionWork=this.choiceSalesman.userName,this.params.constructionWorkId=this.choiceSalesman.userId,this.$refs.salesman.close()}}};t.default=u}).call(this,s(2)["default"])},518:function(e,t,s){"use strict";s.r(t);var a=s(519),r=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},519:function(e,t,s){}},[[512,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/addOverflow/addOverflow.js.map