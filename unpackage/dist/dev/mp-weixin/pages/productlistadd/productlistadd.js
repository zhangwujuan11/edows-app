(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/productlistadd/productlistadd"],{584:function(t,s,i){"use strict";(function(t,s){var e=i(4);i(26);e(i(25));var n=e(i(585));t.__webpack_require_UNI_MP_PLUGIN__=i,s(n.default)}).call(this,i(1)["default"],i(2)["createPage"])},585:function(t,s,i){"use strict";i.r(s);var e=i(586),n=i(588);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(s,t,(function(){return n[t]}))}(a);i(590);var r,c=i(36),o=Object(c["default"])(n["default"],e["render"],e["staticRenderFns"],!1,null,"3a469a46",null,!1,e["components"],r);o.options.__file="pages/productlistadd/productlistadd.vue",s["default"]=o.exports},586:function(t,s,i){"use strict";i.r(s);var e=i(587);i.d(s,"render",(function(){return e["render"]})),i.d(s,"staticRenderFns",(function(){return e["staticRenderFns"]})),i.d(s,"recyclableRender",(function(){return e["recyclableRender"]})),i.d(s,"components",(function(){return e["components"]}))},587:function(t,s,i){"use strict";var e;i.r(s),i.d(s,"render",(function(){return n})),i.d(s,"staticRenderFns",(function(){return r})),i.d(s,"recyclableRender",(function(){return a})),i.d(s,"components",(function(){return e}));try{e={uniPopup:function(){return i.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(i.bind(null,1075))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,s=t.$createElement;t._self._c},a=!1,r=[];n._withStripped=!0},588:function(t,s,i){"use strict";i.r(s);var e=i(589),n=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(s,t,(function(){return e[t]}))}(a);s["default"]=n.a},589:function(t,s,i){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e=i(39),n=function(){i.e("components/tki-tree").then(function(){return resolve(i(1148))}.bind(null,i)).catch(i.oe)},a={components:{tkiTree:n},data:function(){return{form:{status:"0",productParams:[],suppliers:[]},bans:[],paramsList:[],classifyValue:"",classifyIndex:0,csslist:[],classList:[],classname:"",classifyclaIndex:0,sulist:[],superList:[],supername:"",superIndex:0,list:[],flod:!1,cheoption:null,chelist:[],chexinList:[],chexinValue:"",chexinIndex:0,storeProductParamRelList:[],id:"",indicatorStyle:"height: 50px;"}},onBackPress:function(t){if("navigateBack"==t.from){var s=getCurrentPages(),i=s[s.length-2];i=i.$vm,i&&i.getlist&&i.getlist()}},onLoad:function(t){var s=this;(0,e.pinpailist)().then((function(t){s.bans=t.data.items,t.data.items.map((function(t){s.paramsList.push(t.brandName)}))})),(0,e.classlist)().then((function(t){s.csslist=t.data,t.data.map((function(t){s.classList.push(t.dictLabel)}))})),(0,e.superlist)().then((function(t){s.sulist=t.data.items,t.data.items.map((function(t){s.superList.push(t.supplierName)}))})),(0,e.cehcalss)().then((function(t){s.chelist=t.data.items,t.data.items.map((function(t){s.chexinList.push(t.brandName)}))})),(0,e.canshutree)().then((function(t){t.data.map((function(t){t.children&&s.list.push(t)}))})),this.$nextTick((function(){s.id=t.id,t.id&&((0,e.producinfo)(t.id).then((function(t){if(s.form=t.data,t.data.productBrandId&&(s.classifyValue=s.bans.filter((function(s){return s.productBrandId==t.data.productBrandId}))[0].brandName),t.data.motorcycleId&&(s.chexinValue=s.chelist.filter((function(s){return s.productBrandId==t.data.motorcycleId}))[0].brandName),t.data.classify&&(s.classname=s.csslist.filter((function(s){return s.dictValue==t.data.classify}))[0].dictLabel),t.data.suppliers?s.supername=s.sulist.filter((function(s){return s.supplierId==t.data.suppliers[0]}))[0].supplierName:s.form.suppliers=[],t.data.storeProductParamRelList){s.storeProductParamRelList=t.data.storeProductParamRelList;s.list.map((function(i){for(var e=0;e<i.children.length;e++)for(var n=0;n<t.data.storeProductParamRelList.length;n++)i.children[e].id==t.data.storeProductParamRelList[n].paramId&&(s.$set(i,"checked",!0),s.$set(i.children[e],"checked",!0),s.$set(i,"checked",!1));return s.list}))}})),s.paramsid=t.id)}))},methods:{openClassify:function(){this.$refs.classify.open(),this.classifyIndex=0},close:function(){this.$refs.classify.close()},classifyChange:function(t){this.classifyIndex=t.detail.value[0]},confirm:function(){var t=this;this.classifyValue=this.paramsList[this.classifyIndex],this.form.productBrandId=this.bans[this.classifyIndex].productBrandId,(0,e.getTypeData)(this.bans[this.classifyIndex].productBrandId).then((function(s){(0,e.listTypeData)({parentId:s.data.parentId,type:1}).then((function(s){t.cheoption=s.data.items}))})),this.$refs.classify.close()},openClassifycla:function(){this.$refs.classifycla.open(),this.classifyclaIndex=0},closecla:function(){this.$refs.classifycla.close()},classifyChangecla:function(t){this.classifyclaIndex=t.detail.value[0]},confirmcla:function(){this.classname=this.classList[this.classifyclaIndex],this.form.classify=this.csslist[this.classifyclaIndex].dictValue,this.$refs.classifycla.close()},goback:function(){t.navigateTo({url:"/pages/productlist/productlist"})},superclick:function(){this.$refs.superfy.open(),this.superIndex=0},closesuper:function(){this.$refs.superfy.close()},superChange:function(t){this.superIndex=t.detail.value[0]},confirmsuper:function(){this.supername=this.superList[this.superIndex],this.form.suppliers.push(this.sulist[this.superIndex].supplierId),this.$refs.superfy.close()},radioChange:function(t){this.form.status=t.target.value},openchexin:function(){this.$refs.chexinfy.open(),this.chexinIndex=0},closechexin:function(){this.$refs.chexinfy.close()},chexinChange:function(t){this.chexinfy=t.detail.value[0]},confirmchexin:function(){this.chexinValue=this.chexinList[this.chexinIndex],this.form.motorcycleId=this.chelist[this.chexinIndex].productBrandId,this.$refs.chexinfy.close()},treeConfirm:function(t){var s=this;this.form.productParams=[],this.storeProductParamRelList=t,t.map((function(t){s.form.productParams.push(t.paramId)})),this.$forceUpdate()},showTree:function(){this.$refs.tkitree._show()},subform:function(){var s=this;this.form.carg?this.form.name?!this.form.prodLength||/^(0|([1-9][0-9]*))(\.[\d]{1,2})?$/.test(this.form.prodLength)?!this.form.prodWidth||/^(0|([1-9][0-9]*))(\.[\d]{1,2})?$/.test(this.form.prodWidth)?!this.form.risingFalling||/^(0|([1-9][0-9]*))(\.[\d]{1,2})?$/.test(this.form.risingFalling)?!this.form.diagonal||/^(0|([1-9][0-9]*))(\.[\d]{1,2})?$/.test(this.form.diagonal)?!this.form.retailPrice||/^(0|([1-9][0-9]*))(\.[\d]{1,2})?$/.test(this.form.retailPrice)?0!=this.form.suppliers.length?this.form.retailPrice?this.form.productBrandId?this.form.status?this.form.inventoryAlert?/^[+]{0,1}(\d+)$/.test(this.form.inventoryAlert)?this.id?(console.log(this.form),(0,e.updatapouduct)(this.form).then((function(i){200==i.code&&(s.$api.msg("修改成功"),setTimeout((function(){t.navigateBack({data:1})}),1e3))}))):(0,e.addapouduct)(this.form).then((function(i){200==i.code&&(s.$api.msg("添加成功"),setTimeout((function(){t.navigateBack({data:1})}),1e3))})):this.$api.msg("库存预警格式不正确"):this.$api.msg("库存预警不能为空"):this.$api.msg("状态不能为空"):this.$api.msg("品牌不能为空"):this.$api.msg("零售价不能为空"):this.$api.msg("供应商不能为空"):this.$api.msg("零售价格式不正确"):this.$api.msg("对角格式不正确"):this.$api.msg("中高格式不正确"):this.$api.msg("宽度格式不正确"):this.$api.msg("长度格式不正确"):this.$api.msg("产品名称不能为空"):this.$api.msg("carg码不能为空")}}};s.default=a}).call(this,i(2)["default"])},590:function(t,s,i){"use strict";i.r(s);var e=i(591),n=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(s,t,(function(){return e[t]}))}(a);s["default"]=n.a},591:function(t,s,i){}},[[584,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/productlistadd/productlistadd.js.map